import{g as Z,c as J,o as k,a as t,j as Q,d as $,t as C,k as c,n as tt,C as A,l as V,s as H,m as P,v as st,r as et,p as at,q as ot,x as K,y as S,z as nt,A as X,L as rt,B as it,D as lt,E as dt,F as ct,P as ut,G as ft,H as ht,I as L,J as mt,K as gt,M as pt,N as _t,O as q,_ as bt}from"./Ddrs3F_q.js";import{u as T}from"./BqilT2kN.js";const vt={class:"row"},yt={class:"col-xl-3 col-md-6 mb-4"},xt={class:"card border-left-primary shadow h-100 p-2"},wt={class:"card-body"},kt={class:"row no-gutters align-items-center h-100"},Ct={class:"col"},Dt={class:"fs-3 mb-0 fw-bold"},$t={class:"col-xl-3 col-md-6 mb-4"},Lt={class:"card border-left-info shadow h-100 p-2"},Pt={class:"card-body"},St={class:"row no-gutters align-items-center h-100"},At={class:"col mr-2"},jt={class:"row no-gutters align-items-center"},Bt={class:"col-auto"},Rt={class:"fs-3 mb-0 fw-bold"},It={class:"col"},Ot={class:"progress progress-sm mr-2"},Nt={class:"col-xl-3 col-md-6 mb-4"},Ft={class:"card border-left-warning shadow h-100 p-2"},Et={class:"card-body"},Mt={class:"row no-gutters align-items-center h-100"},Ut={class:"col"},qt={class:"fs-3 mb-0 fw-bold"},Tt={__name:"ContentRow",props:{stats:{type:Object,required:!0},checkInNum:{required:!0}},setup(s){const e=s,n=Z(()=>{var a,i;return((((i=(a=e==null?void 0:e.stats)==null?void 0:a.css)==null?void 0:i.length)??0)/27).toFixed(2)*100});return(u,a)=>{var i;return k(),J("div",vt,[t("div",yt,[t("div",xt,[t("div",wt,[t("div",kt,[t("div",Ct,[a[1]||(a[1]=t("div",{class:"font-weight-bold text-primary mb-1"}," 每日任務總打卡次數 ",-1)),t("div",Dt,[$(C(s.checkInNum)+" ",1),a[0]||(a[0]=t("span",{class:"fs-6 fw-light"},"次",-1))])]),a[2]||(a[2]=t("div",{class:"col-auto"},[t("i",{class:"fas fa-check fa-2x text-gray-300"})],-1))])])])]),t("div",$t,[t("div",Lt,[t("div",Pt,[t("div",St,[t("div",At,[a[3]||(a[3]=t("div",{class:"text-xs font-weight-bold text-info text-uppercase mb-1"}," 任務發布進度 ",-1)),t("div",jt,[t("div",Bt,[t("div",Rt,C(c(n))+" % ",1)]),t("div",It,[t("div",Ot,[t("div",{class:"progress-bar bg-info",role:"progressbar",style:tt({width:`${c(n)}%`}),"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"},null,4)])])])]),a[4]||(a[4]=t("div",{class:"col-auto"},[t("i",{class:"fas fa-clipboard-list fa-2x text-gray-300"})],-1))])])])]),t("div",Nt,[t("div",Ft,[t("div",Et,[t("div",Mt,[t("div",Ut,[a[6]||(a[6]=t("div",{class:"font-weight-bold text-warning mb-1"}," 每日任務已經累積 ",-1)),t("div",qt,[$(C((i=e==null?void 0:e.stats)==null?void 0:i.css.length)+" ",1),a[5]||(a[5]=t("span",{class:"fs-6 fw-light"},"天",-1))])]),a[7]||(a[7]=t("div",{class:"col-auto"},[t("i",{class:"fas fa-calendar fa-2x text-gray-300"})],-1))])])])]),a[8]||(a[8]=Q('<div class="col-xl-3 col-md-6 mb-4"><div class="card border-left-success shadow h-100 p-2"><div class="card-body"><div class="row no-gutters align-items-center h-100"><div class="col"><div class="font-weight-bold text-success mb-1">查看每日任務打卡回報區</div><div class="fs-5 mb-0"><a href="https://discord.com/channels/801807326054055996/1349590197708525638" target="_blank" rel="noopener noreferrer">點此前往 Discord </a></div></div><div class="col-auto"><i class="fas fa-arrow-right fa-2x text-gray-300"></i></div></div></div></div></div>',1))])}}},W={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},zt={ariaLabel:{type:String},ariaDescribedby:{type:String}},Jt={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...W,...zt},Vt=st[0]==="2"?(s,e)=>Object.assign(s,{attrs:e}):(s,e)=>Object.assign(s,e);function w(s){return X(s)?S(s):s}function Ht(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s;return X(e)?new Proxy(s,{}):s}function Kt(s,e){const n=s.options;n&&e&&Object.assign(n,e)}function G(s,e){s.labels=e}function Y(s,e,n){const u=[];s.datasets=e.map(a=>{const i=s.datasets.find(l=>l[n]===a[n]);return!i||!a.data||u.includes(i)?{...a}:(u.push(i),Object.assign(i,a),i)})}function Xt(s,e){const n={labels:[],datasets:[]};return G(n,s.labels),Y(n,s.datasets,e),n}const Wt=V({props:Jt,setup(s,e){let{expose:n,slots:u}=e;const a=et(null),i=H(null);n({chart:i});const l=()=>{if(!a.value)return;const{type:o,data:p,options:y,plugins:h,datasetIdKey:m}=s,b=Xt(p,m),f=Ht(b,p);i.value=new A(a.value,{type:o,data:f,options:{...y},plugins:h})},g=()=>{const o=S(i.value);o&&(s.destroyDelay>0?setTimeout(()=>{o.destroy(),i.value=null},s.destroyDelay):(o.destroy(),i.value=null))},r=o=>{o.update(s.updateMode)};return at(l),ot(g),K([()=>s.options,()=>s.data],(o,p)=>{let[y,h]=o,[m,b]=p;const f=S(i.value);if(!f)return;let d=!1;if(y){const _=w(y),x=w(m);_&&_!==x&&(Kt(f,_),d=!0)}if(h){const _=w(h.labels),x=w(b.labels),v=w(h.datasets),D=w(b.datasets);_!==x&&(G(f.config.data,_),d=!0),v&&v!==D&&(Y(f.config.data,v,s.datasetIdKey),d=!0)}d&&nt(()=>{r(f)})},{deep:!0}),()=>P("canvas",{role:"img",ariaLabel:s.ariaLabel,ariaDescribedby:s.ariaDescribedby,ref:a},[P("p",{},[u.default?u.default():""])])}});function Gt(s,e){return A.register(e),V({props:W,setup(n,u){let{expose:a}=u;const i=H(null),l=g=>{i.value=g==null?void 0:g.chart};return a({chart:i}),()=>P(Wt,Vt({ref:l},{type:s,...n}))}})}const Yt=Gt("line",rt),Zt={__name:"CheckinLineChart",props:{stats:{type:Object,required:!0}},setup(s){var l,g;A.register(it,lt,dt,ct,ut,ft,ht);function e(r,o=0,p=".",y=","){r=(r+"").replace(/[^0-9+\-Ee.]/g,"");const h=isFinite(+r)?+r:0,m=isFinite(+o)?Math.abs(o):0,b=y,f=p;let d="";return d=(m?((x,v)=>""+Math.round(x*Math.pow(10,v))/Math.pow(10,v))(h,m):""+Math.round(h)).split("."),d[0].length>3&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,b)),(d[1]||"").length<m&&(d[1]=d[1]||"",d[1]+=new Array(m-d[1].length+1).join("0")),d.join(f)}const n=s,a={labels:Array.from({length:n.stats.css.length},(r,o)=>`Day ${o+1}`),datasets:[{label:"切版任務",data:(l=n==null?void 0:n.stats)==null?void 0:l.css,fill:!1,backgroundColor:"rgba(78, 115, 223, 0.05)",borderColor:"rgba(78, 115, 223, 1)",pointBackgroundColor:"rgba(78, 115, 223, 1)",tension:0},{label:"JS 任務",data:(g=n==null?void 0:n.stats)==null?void 0:g.js,fill:!1,backgroundColor:"rgba(244, 189, 51, 0.05)",borderColor:"rgba(244, 189, 51, 1)",pointBackgroundColor:"rgba(244, 189, 51, 1)",tension:0}]},i={responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:10,right:25,top:25,bottom:0}},plugins:{legend:{display:!0,position:"right",labels:{boxWidth:12,padding:10}},tooltip:{backgroundColor:"rgb(255,255,255)",bodyColor:"#858796",titleColor:"#6e707e",titleFont:{size:14},borderColor:"#dddfeb",borderWidth:1,padding:15,displayColors:!1,mode:"index",intersect:!1,callbacks:{label:function(r){return r.datasetIndex===0?"切版任務完成數: "+e(r.raw):r.datasetIndex===1?"JS 任務完成數: "+e(r.raw):e(r.raw)}}}},scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{maxTicksLimit:7}},y:{grid:{color:"rgb(234, 236, 244)",zeroLineColor:"rgb(234, 236, 244)",drawBorder:!1,borderDash:[2],zeroLineBorderDash:[2]},ticks:{maxTicksLimit:5,padding:10,callback:r=>e(r)}}}};return(r,o)=>(k(),L(c(Yt),{data:a,options:i}))}},Qt=mt("/img/undraw_learning_2jue.svg");var z={API_BASE_URL:"https://hex2025.onrender.com/api"};const ts={id:"content-wrapper",class:"d-flex flex-column height-100vh pt-4"},ss={id:"content"},es={class:"container-fluid"},as={class:"row"},os={class:"col-xl-8 col-lg-7 mb-4"},ns={class:"card shadow h-100"},rs={class:"card-body"},is={class:"chart-area"},ls={class:"col-xl-4 col-lg-5 mb-4"},ds={class:"card shadow h-100"},cs={class:"card-body px-4"},us={class:"f-column gap-3 mt-3"},fs={class:"f-column gap-2"},hs=["href"],ms={class:"f-column gap-2"},gs=["href"],ps={__name:"Dashboard",async setup(s){let e,n;const{$swal:u}=gt(),a=pt(),i=r=>{const{message:o}=(r==null?void 0:r.data)||{};u.fire({position:"center",icon:"error",title:o||"發生未知錯誤，請稍後重試",showConfirmButton:!1,timer:1500})},[{data:l},{data:g}]=([e,n]=_t(()=>Promise.all([T("/tasks/",{baseURL:z.API_BASE_URL,onResponseError({response:r}){i(r)}},"$g_9_Z1PXXu"),T("/dashboard/",{baseURL:z.API_BASE_URL,transform:r=>r.stats.filter(o=>new Date(o.date)>=new Date("2025-05-01")).reduce((o,p)=>o+p.count,0),onResponseError({response:r}){i(r)}},"$xNXYvwpvRF")])),e=await e,n(),e);return K(()=>a.fullPath,()=>{refresh()}),(r,o)=>{var h,m,b,f,d,_,x,v,D,j,B,R,I,O,N,F,E,M,U;const p=Tt,y=Zt;return k(),J("div",ts,[t("div",ss,[t("div",es,[o[5]||(o[5]=t("div",{class:"d-sm-flex align-items-center justify-content-between mb-4"},[t("h1",{class:"h3 mb-0 text-gray-800"},"Dashboard")],-1)),(h=c(l))!=null&&h.stats?(k(),L(p,{key:0,stats:(m=c(l))==null?void 0:m.stats,checkInNum:c(g)},null,8,["stats","checkInNum"])):q("",!0),t("div",as,[t("div",os,[t("div",ns,[o[0]||(o[0]=t("div",{class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[t("h6",{class:"m-0 font-weight-bold text-primary"}," 每日任務完成數量 ")],-1)),t("div",rs,[t("div",is,[(b=c(l))!=null&&b.stats?(k(),L(y,{key:0,stats:(f=c(l))==null?void 0:f.stats},null,8,["stats"])):q("",!0)])])])]),t("div",ls,[t("div",ds,[o[4]||(o[4]=t("div",{class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[t("h6",{class:"m-0 font-weight-bold text-primary"},"今日任務")],-1)),t("div",cs,[o[3]||(o[3]=t("div",{class:"f-center"},[t("img",{src:Qt,alt:"learning-image",class:"img-fluid",style:{width:"16rem"}})],-1)),t("ul",us,[t("li",fs,[o[1]||(o[1]=t("span",{class:"fs-5"},[t("i",{class:"fas fa-circle text-primary me-1"}),$(" 切版 ")],-1)),t("a",{href:(x=(d=c(l))==null?void 0:d.formatted_tasks)==null?void 0:x.htmlAndCss[((_=c(l))==null?void 0:_.formatted_tasks.htmlAndCss.length)-1].link,target:"_blank",class:"fs-5 text-decoration-none slide-right-hover"},C((B=(v=c(l))==null?void 0:v.formatted_tasks)==null?void 0:B.htmlAndCss[((j=(D=c(l))==null?void 0:D.formatted_tasks)==null?void 0:j.htmlAndCss.length)-1].title),9,hs)]),t("li",ms,[o[2]||(o[2]=t("span",{class:"fs-5"},[t("i",{class:"fas fa-circle text-warning me-1"}),$(" JavaScript ")],-1)),t("a",{href:(N=(R=c(l))==null?void 0:R.formatted_tasks)==null?void 0:N.javaScript[((O=(I=c(l))==null?void 0:I.formatted_tasks)==null?void 0:O.javaScript.length)-1].link,target:"_blank",class:"fs-5 text-decoration-none slide-right-hover"},C((U=(F=c(l))==null?void 0:F.formatted_tasks)==null?void 0:U.javaScript[((M=(E=c(l))==null?void 0:E.formatted_tasks)==null?void 0:M.javaScript.length)-1].title),9,gs)])])])])])])])])])}}},_s={};function bs(s,e){const n=ps;return k(),L(n)}const xs=bt(_s,[["render",bs]]);export{xs as default};
