import{_ as A,K as L,S as B,r as h,M as C,x as R,c as l,a as e,j as k,k as c,Q as g,R as x,t as y,o as d,N as U}from"./BZKc5enx.js";import{u as E}from"./Bbdewsoi.js";function I(f,i,b="2025-04-28"){const o=new Date(b),p=i.reduce((t,a)=>{const s=new Date(a.date);return s>t?s:t},o),n=Math.floor((p-o)/(1e3*60*60*24))+1,u=Array.from({length:n},(t,a)=>{const s=new Date(o);return s.setDate(o.getDate()+a),s.toISOString().slice(0,10)}),m=f.map(t=>{const a=u.map(s=>{var r;return!!((r=t.presence)!=null&&r[s])});return{author_id:t.author_id,username:t.username,days:a}});return{dateList:u,processedUsers:m}}const N=f=>new Date(f).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"});var P={API_BASE_URL:"https://4ccf-114-27-206-1.ngrok-free.app/api"};const M={class:"container-fluid py-4 height-100vh"},V={class:"card shadow mt-4"},F={class:"card-body container-fluid pt-3"},$={class:"table-responsive mt-3"},j={key:0,class:"table table-bordered table-hover",id:"dataTable",width:"100%",cellspacing:"0"},z={class:"table-light"},K=["title"],O={key:0,class:"fas fa-solid fa-check text-success"},Q={key:1,class:"py-4"},W={class:"row f-between-center mt-3"},q={class:"col-sm-6"},G={class:"dataTables_info",id:"dataTable_info",role:"status","aria-live":"polite"},H={__name:"index",async setup(f){let i,b;const o=L(),{$swal:p}=B();h(),h(1),h(10);const{data:n,pending:u,refresh:m}=([i,b]=C(()=>E(()=>"/dashboard",{key:o.fullPath,initialCache:!1,baseURL:P.API_BASE_URL,transform:t=>I(t.users,t.stats,"2025-04-28"),onResponseError({response:t}){const{message:a}=t==null?void 0:t.data;p.fire({position:"center",icon:"error",title:a||"發生未知錯誤，請稍後重試",showConfirmButton:!1,timer:1500})}},"$Da9EyIdlDM")),i=await i,b(),i);return R(()=>o.fullPath,()=>{m()}),(t,a)=>{var s,r,T;return d(),l("div",M,[a[5]||(a[5]=e("h1",{class:"h3 mb-2 text-gray-800"},"Tables",-1)),e("div",V,[a[4]||(a[4]=e("div",{class:"card-header py-4"},[e("h2",{class:"fs-5 m-0 text-primary"},"每日任務打卡狀況")],-1)),e("div",F,[a[3]||(a[3]=k('<div class="row" data-v-f4991b61><div class="col" data-v-f4991b61><ol class="p-0" data-v-f4991b61><li data-v-f4991b61><p class="m-0" data-v-f4991b61>*資料更新頻率：一個小時更新一次</p></li><li data-v-f4991b61><p class="m-0" data-v-f4991b61>*只要在該日打卡討論串留言就算打卡成功</p></li></ol></div></div><div class="row f-between-center" data-v-f4991b61><div class="col-sm-6 col-xxl-2" data-v-f4991b61><div class="dataTables_length" id="dataTable_length" data-v-f4991b61><label class="f-center gap-2" data-v-f4991b61> Show <select name="dataTable_length" aria-controls="dataTable" class="form-control form-control-sm" data-v-f4991b61><option value="10" data-v-f4991b61>10</option><option value="25" data-v-f4991b61>25</option><option value="50" data-v-f4991b61>50</option><option value="100" data-v-f4991b61>100</option></select> entries </label></div></div><div class="col-sm-6 col-xxl-3 mt-2 mt-sm-0" data-v-f4991b61><div id="dataTable_filter" class="dataTables_filter text-end" data-v-f4991b61><label class="f-center gap-2" data-v-f4991b61> Search: <input type="search" class="form-control form-control-sm" placeholder="搜尋使用者名稱" aria-controls="dataTable" data-v-f4991b61></label></div></div></div>',2)),e("div",$,[c(n)?(d(),l("table",j,[e("thead",z,[e("tr",null,[a[0]||(a[0]=e("th",null,"使用者名稱",-1)),(d(!0),l(g,null,x((s=c(n))==null?void 0:s.dateList,(_,v)=>(d(),l("th",{key:v,title:c(N)(_)}," Day "+y(v+1),9,K))),128))])]),e("tbody",null,[(d(!0),l(g,null,x((r=c(n))==null?void 0:r.processedUsers,({author_id:_,username:v,days:w})=>(d(),l("tr",{key:_},[e("td",null,y(v),1),(d(!0),l(g,null,x(w,(D,S)=>(d(),l("td",{key:S,class:"text-center"},[D?(d(),l("i",O)):U("",!0)]))),128))]))),128))])])):(d(),l("div",Q,a[1]||(a[1]=[e("h2",{class:"fs-5 fs-lg-2"},"請重新整理頁面",-1)])))]),e("div",W,[e("div",q,[e("div",G," Showing 1 to 10 of "+y((T=c(n))==null?void 0:T.processedUsers.length)+" entries ",1)]),a[2]||(a[2]=k('<div class="col-sm-6 mt-2 mt-sm-0" data-v-f4991b61><div class="f-md-end-center" data-v-f4991b61><ul class="pagination" data-v-f4991b61><li class="paginate_button page-item previous disabled" id="dataTable_previous" data-v-f4991b61><a href="#" aria-controls="dataTable" data-dt-idx="0" tabindex="0" class="page-link" data-v-f4991b61><i class="fas fa-solid fa-angle-left" data-v-f4991b61></i></a></li><li class="paginate_button page-item active" data-v-f4991b61><a href="#" aria-controls="dataTable" data-dt-idx="1" tabindex="0" class="page-link" data-v-f4991b61>1</a></li><li class="paginate_button page-item" data-v-f4991b61><a href="#" aria-controls="dataTable" data-dt-idx="2" tabindex="0" class="page-link" data-v-f4991b61>2</a></li><li class="paginate_button page-item" data-v-f4991b61><a href="#" aria-controls="dataTable" data-dt-idx="3" tabindex="0" class="page-link" data-v-f4991b61>3</a></li><li class="paginate_button page-item next" id="dataTable_next" data-v-f4991b61><a href="#" aria-controls="dataTable" data-dt-idx="7" tabindex="0" class="page-link" data-v-f4991b61><i class="fas fa-solid fa-angle-right" data-v-f4991b61></i></a></li></ul></div></div>',1))])])])])}}},Y=A(H,[["__scopeId","data-v-f4991b61"]]);export{Y as default};
