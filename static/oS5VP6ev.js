var X=Object.defineProperty;var q=s=>{throw TypeError(s)};var Y=(s,a,r)=>a in s?X(s,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[a]=r;var O=(s,a,r)=>Y(s,typeof a!="symbol"?a+"":a,r),Z=(s,a,r)=>a.has(s)||q("Cannot "+r);var P=(s,a,r)=>(Z(s,a,"read from private field"),r?r.call(s):a.get(s)),H=(s,a,r)=>a.has(s)?q("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(s):a.set(s,r);import{M as R,N as W,O as S,n as V,Q as K,R as $,r as x,s as I,S as ee,T as ae,G as j,U as te,V as se,W as re,m as ne,X as ie,Y as oe,_ as le,Z as ce,$ as de,l as ue,c as w,a as g,g as J,J as L,K as N,t as F,o as B,a0 as fe}from"./BsHDBpp3.js";function he(s,a,r="2025-04-28"){const e=new Date(r),t=a.reduce((o,l)=>{const c=new Date(l.date);return c>o?c:o},e),n=Math.floor((t-e)/(1e3*60*60*24))+1,i=Array.from({length:n},(o,l)=>{const c=new Date(e);return c.setDate(e.getDate()+l),c.toISOString().slice(0,10)}),d=s.map(o=>{const l=i.map(c=>{var h;return!!((h=o.presence)!=null&&h[c])});return{author_id:o.author_id,username:o.username,days:l}});return{dateList:i,processedUsers:d}}const ye=s=>new Date(s).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"});function ve(s){return typeof s=="string"?`'${s}'`:new _e().serialize(s)}const _e=function(){var a;class s{constructor(){H(this,a,new Map)}compare(e,t){const n=typeof e,i=typeof t;return n==="string"&&i==="string"?e.localeCompare(t):n==="number"&&i==="number"?e-t:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(t,!0))}serialize(e,t){if(e===null)return"null";switch(typeof e){case"string":return t?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const t=Object.prototype.toString.call(e);if(t!=="[object Object]")return this.serializeBuiltInType(t.length<10?`unknown:${t}`:t.slice(8,-1),e);const n=e.constructor,i=n===Object||n===void 0?"":n.name;if(i!==""&&globalThis[i]===n)return this.serializeBuiltInType(i,e);if(typeof e.toJSON=="function"){const d=e.toJSON();return i+(d!==null&&typeof d=="object"?this.$object(d):`(${this.serialize(d)})`)}return this.serializeObjectEntries(i,Object.entries(e))}serializeBuiltInType(e,t){const n=this["$"+e];if(n)return n.call(this,t);if(typeof(t==null?void 0:t.entries)=="function")return this.serializeObjectEntries(e,t.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,t){const n=Array.from(t).sort((d,o)=>this.compare(d[0],o[0]));let i=`${e}{`;for(let d=0;d<n.length;d++){const[o,l]=n[d];i+=`${this.serialize(o,!0)}:${this.serialize(l)}`,d<n.length-1&&(i+=",")}return i+"}"}$object(e){let t=P(this,a).get(e);return t===void 0&&(P(this,a).set(e,`#${P(this,a).size}`),t=this.serializeObject(e),P(this,a).set(e,t)),t}$function(e){const t=Function.prototype.toString.call(e);return t.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${t.replace(/\s*\n\s*/g,"")}`}$Array(e){let t="[";for(let n=0;n<e.length;n++)t+=this.serialize(e[n]),n<e.length-1&&(t+=",");return t+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((t,n)=>this.compare(t,n)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}a=new WeakMap;for(const r of["Error","RegExp","URL"])s.prototype["$"+r]=function(e){return`${r}(${e})`};for(const r of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])s.prototype["$"+r]=function(e){return`${r}[${e.join(",")}]`};for(const r of["BigInt64Array","BigUint64Array"])s.prototype["$"+r]=function(e){return`${r}[${e.join("n,")}${e.length>0?"n":""}]`};return s}(),me=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ge=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",z=[];class be{constructor(){O(this,"_data",new E);O(this,"_hash",new E([...me]));O(this,"_nDataBytes",0);O(this,"_minBufferSize",0)}finalize(a){a&&this._append(a);const r=this._nDataBytes*8,e=this._data.sigBytes*8;return this._data.words[e>>>5]|=128<<24-e%32,this._data.words[(e+64>>>9<<4)+14]=Math.floor(r/4294967296),this._data.words[(e+64>>>9<<4)+15]=r,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(a,r){const e=this._hash.words;let t=e[0],n=e[1],i=e[2],d=e[3],o=e[4],l=e[5],c=e[6],h=e[7];for(let u=0;u<64;u++){if(u<16)z[u]=a[r+u]|0;else{const D=z[u-15],f=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,y=z[u-2],C=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;z[u]=f+z[u-7]+C+z[u-16]}const v=o&l^~o&c,p=t&n^t&i^n&i,T=(t<<30|t>>>2)^(t<<19|t>>>13)^(t<<10|t>>>22),m=(o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25),_=h+m+v+ge[u]+z[u],b=T+p;h=c,c=l,l=o,o=d+_|0,d=i,i=n,n=t,t=_+b|0}e[0]=e[0]+t|0,e[1]=e[1]+n|0,e[2]=e[2]+i|0,e[3]=e[3]+d|0,e[4]=e[4]+o|0,e[5]=e[5]+l|0,e[6]=e[6]+c|0,e[7]=e[7]+h|0}_append(a){typeof a=="string"&&(a=E.fromUtf8(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes}_process(a){let r,e=this._data.sigBytes/64;a?e=Math.ceil(e):e=Math.max((e|0)-this._minBufferSize,0);const t=e*16,n=Math.min(t*4,this._data.sigBytes);if(t){for(let i=0;i<t;i+=16)this._doProcessBlock(this._data.words,i);r=this._data.words.splice(0,t),this._data.sigBytes-=n}return new E(r,n)}}class E{constructor(a,r){O(this,"words");O(this,"sigBytes");a=this.words=a||[],this.sigBytes=r===void 0?a.length*4:r}static fromUtf8(a){const r=unescape(encodeURIComponent(a)),e=r.length,t=[];for(let n=0;n<e;n++)t[n>>>2]|=(r.charCodeAt(n)&255)<<24-n%4*8;return new E(t,e)}toBase64(){const a=[];for(let r=0;r<this.sigBytes;r+=3){const e=this.words[r>>>2]>>>24-r%4*8&255,t=this.words[r+1>>>2]>>>24-(r+1)%4*8&255,n=this.words[r+2>>>2]>>>24-(r+2)%4*8&255,i=e<<16|t<<8|n;for(let d=0;d<4&&r*8+d*6<this.sigBytes*8;d++)a.push(pe.charAt(i>>>6*(3-d)&63))}return a.join("")}concat(a){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let r=0;r<a.sigBytes;r++){const e=a.words[r>>>2]>>>24-r%4*8&255;this.words[this.sigBytes+r>>>2]|=e<<24-(this.sigBytes+r)%4*8}else for(let r=0;r<a.sigBytes;r+=4)this.words[this.sigBytes+r>>>2]=a.words[r>>>2];this.sigBytes+=a.sigBytes}}function De(s){return new be().finalize(s).toBase64()}function Q(s){return De(ve(s))}const we={trailing:!0};function Be(s,a=25,r={}){if(r={...we,...r},!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let e,t,n=[],i,d;const o=(l,c)=>(i=$e(s,l,c),i.finally(()=>{if(i=null,r.trailing&&d&&!t){const h=o(l,d);return d=null,h}}),i);return function(...l){return i?(r.trailing&&(d=l),i):new Promise(c=>{const h=!t&&r.leading;clearTimeout(t),t=setTimeout(()=>{t=null;const u=r.leading?e:o(this,l);for(const v of n)v(u);n=[]},a),h?(e=o(this,l),c(e)):n.push(c)})}}async function $e(s,a,r){return await s.apply(a,r)}const Te=s=>s==="defer"||s===!1;function Se(...s){var T;const a=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&typeof s[0]!="object"&&!(typeof s[0]=="function"&&typeof s[1]=="function")&&s.unshift(a);let[r,e,t={}]=s;const n=R(()=>$(r));if(typeof n.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof e!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const i=W(),d=()=>S.value,o=(m,_,b)=>{if(_.isHydrating)return _.payload.data[m];if(b.cause!=="refresh:manual"&&b.cause!=="refresh:hook")return _.static.data[m]};t.server??(t.server=!0),t.default??(t.default=d),t.getCachedData??(t.getCachedData=o),t.lazy??(t.lazy=!1),t.immediate??(t.immediate=!0),t.deep??(t.deep=S.deep),t.dedupe??(t.dedupe="cancel"),t._functionName,i._asyncData[n.value];const l=t.getCachedData(n.value,i,{cause:"initial"});(T=i._asyncData[n.value])!=null&&T._deps||(i._asyncData[n.value]=G(i,n.value,e,t,l));const c=i._asyncData[n.value];c._deps++;const h=()=>i._asyncData[n.value].execute({cause:"initial",dedupe:t.dedupe}),u=t.server!==!1&&i.payload.serverRendered;{let m=function(f){const y=i._asyncData[f];y!=null&&y._deps&&(y._deps--,y._deps===0&&(y==null||y._off(),k(i,f),y.execute=()=>Promise.resolve(),i._asyncData[f].data.value=S.value))};const _=se();if(_&&u&&t.immediate&&!_.sp&&(_.sp=[]),_&&!_._nuxtOnBeforeMountCbs){_._nuxtOnBeforeMountCbs=[];const f=_._nuxtOnBeforeMountCbs;re(()=>{f.forEach(y=>{y()}),f.splice(0,f.length)}),ne(()=>f.splice(0,f.length))}u&&i.isHydrating&&(c.error.value||l!=null)?(c.pending.value=!1,c.status.value=c.error.value?"error":"success"):_&&(i.payload.serverRendered&&i.isHydrating||t.lazy)&&t.immediate?_._nuxtOnBeforeMountCbs.push(h):t.immediate&&h();const b=te(),D=V([n,...t.watch||[]],([f],[y])=>{var C;if(y===f){c._execute({cause:"watch",dedupe:t.dedupe});return}y&&m(y),(C=i._asyncData[f])!=null&&C._deps||(i._asyncData[f]=G(i,f,e,t,t.getCachedData(f,i,{cause:"initial"}))),i._asyncData[f]._deps++,t.immediate&&i._asyncData[f].execute({cause:"initial",dedupe:t.dedupe})});b&&K(()=>{D(),m(n.value)})}const v={data:U(()=>i._asyncData[n.value].data),pending:U(()=>i._asyncData[n.value].pending),status:U(()=>i._asyncData[n.value].status),error:U(()=>i._asyncData[n.value].error),refresh:(...m)=>i._asyncData[n.value].execute(...m),execute:(...m)=>i._asyncData[n.value].execute(...m),clear:()=>k(i,n.value)},p=Promise.resolve(i._asyncDataPromises[n.value]).then(()=>v);return Object.assign(p,v),p}function U(s){return R({get(){return s().value},set(a){s().value=a}})}function k(s,a){a in s.payload.data&&(s.payload.data[a]=void 0),a in s.payload._errors&&(s.payload._errors[a]=S.errorValue),s._asyncData[a]&&(s._asyncData[a].data.value=void 0,s._asyncData[a].error.value=S.errorValue,s._asyncData[a].pending.value=!1,s._asyncData[a].status.value="idle"),a in s._asyncDataPromises&&(s._asyncDataPromises[a]&&(s._asyncDataPromises[a].cancelled=!0),s._asyncDataPromises[a]=void 0)}function Ce(s,a){const r={};for(const e of a)r[e]=s[e];return r}function G(s,a,r,e,t){var l;(l=s.payload._errors)[a]??(l[a]=S.errorValue);const n=r,i=e.deep?x:I,d=t!=null,o={data:i(d?t:e.default()),pending:I(!d),error:ee(s.payload._errors,a),status:I("idle"),execute:(c={})=>{if(s._asyncDataPromises[a]){if(Te(c.dedupe??e.dedupe))return s._asyncDataPromises[a];s._asyncDataPromises[a].cancelled=!0}if(c.cause==="initial"||s.isHydrating){const u=c.cause==="initial"?t:e.getCachedData(a,s,{cause:c.cause??"refresh:manual"});if(u!=null)return s.payload.data[a]=o.data.value=u,o.error.value=S.errorValue,o.status.value="success",Promise.resolve(u)}o.pending.value=!0,o.status.value="pending";const h=new Promise((u,v)=>{try{u(n(s))}catch(p){v(p)}}).then(async u=>{if(h.cancelled)return s._asyncDataPromises[a];let v=u;e.transform&&(v=await e.transform(u)),e.pick&&(v=Ce(v,e.pick)),s.payload.data[a]=v,o.data.value=v,o.error.value=S.errorValue,o.status.value="success"}).catch(u=>{if(h.cancelled)return s._asyncDataPromises[a];o.error.value=ae(u),o.data.value=j(e.default()),o.status.value="error"}).finally(()=>{h.cancelled||(o.pending.value=!1,delete s._asyncDataPromises[a])});return s._asyncDataPromises[a]=h,s._asyncDataPromises[a]},_execute:Be((...c)=>o.execute(...c),0,{leading:!0}),_default:e.default,_deps:0,_hash:void 0,_off:s.hook("app:data:refresh",async c=>{(!c||c.includes(a))&&await o.execute({cause:"refresh:hook"})})};return o}function Oe(s,a,r){const[e={},t]=typeof a=="string"?[{},a]:[a,r],n=R(()=>$(s)),i=R(()=>$(e.key)||"$f"+Q([t,typeof n.value=="string"?n.value:"",...ze(e)]));if(!e.baseURL&&typeof n.value=="string"&&n.value[0]==="/"&&n.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:d,lazy:o,default:l,transform:c,pick:h,watch:u,immediate:v,getCachedData:p,deep:T,dedupe:m,..._}=e,b=ie({...oe,..._,cache:typeof e.cache=="boolean"?void 0:e.cache}),D={server:d,lazy:o,default:l,transform:c,pick:h,immediate:v,getCachedData:p,deep:T,dedupe:m,watch:u===!1?[]:[...u||[],b]};u!==!1&&!v&&V([...u||[],b],()=>{D.immediate=!0},{flush:"pre",once:!0});let f;return Se(i,()=>{var A;(A=f==null?void 0:f.abort)==null||A.call(f,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),f=typeof AbortController<"u"?new AbortController:{};const C=$(e.timeout);let M;return C&&(M=setTimeout(()=>f.abort(new DOMException("Request aborted due to timeout.","AbortError")),C),f.signal.onabort=()=>clearTimeout(M)),(e.$fetch||globalThis.$fetch)(n.value,{signal:f.signal,...b}).finally(()=>{clearTimeout(M)})},D)}function ze(s){var r;const a=[((r=$(s.method))==null?void 0:r.toUpperCase())||"GET",$(s.baseURL)];for(const e of[s.params||s.query]){const t=$(e);if(!t)continue;const n={};for(const[i,d]of Object.entries(t))n[$(i)]=$(d);a.push(n)}return s.body&&a.push(Q($(s.body))),a}var je={API_BASE_URL:"https://4ccf-114-27-206-1.ngrok-free.app/api"};const Ee={class:"container-fluid py-4 height-100vh"},Pe={class:"card shadow mt-4"},Ue={class:"card-body container-fluid pt-3"},xe={class:"table-responsive mt-3"},Re={key:0,class:"table table-bordered table-hover",id:"dataTable",width:"100%",cellspacing:"0"},Me={class:"table-light"},Ie=["title"],Le={key:0,class:"fas fa-solid fa-check text-success"},Ne={key:1,class:"py-4"},Fe={class:"row f-between-center mt-3"},Ve={class:"col-sm-6"},Ae={class:"dataTables_info",id:"dataTable_info",role:"status","aria-live":"polite"},qe={__name:"index",async setup(s){let a,r;const e=ce(),{$swal:t}=W();x(),x(1),x(10);const{data:n,pending:i,refresh:d}=([a,r]=de(()=>Oe(()=>"/dashboard",{key:e.fullPath,initialCache:!1,baseURL:je.API_BASE_URL,transform:o=>he(o.users,o.stats,"2025-04-28"),onResponseError({response:o}){const{message:l}=o==null?void 0:o.data;t.fire({position:"center",icon:"error",title:l||"發生未知錯誤，請稍後重試",showConfirmButton:!1,timer:1500})}},"$Da9EyIdlDM")),a=await a,r(),a);return V(()=>e.fullPath,()=>{d()}),ue(()=>console.log(n.value)),(o,l)=>{var c,h,u;return B(),w("div",Ee,[l[5]||(l[5]=g("h1",{class:"h3 mb-2 text-gray-800"},"Tables",-1)),g("div",Pe,[l[4]||(l[4]=g("div",{class:"card-header py-4"},[g("h2",{class:"fs-5 m-0 text-primary"},"每日任務打卡狀況")],-1)),g("div",Ue,[l[3]||(l[3]=J('<div class="row" data-v-2e4f06a4><div class="col" data-v-2e4f06a4><ol class="p-0" data-v-2e4f06a4><li data-v-2e4f06a4><p class="m-0" data-v-2e4f06a4>*資料更新頻率：一個小時更新一次</p></li><li data-v-2e4f06a4><p class="m-0" data-v-2e4f06a4>*只要在該日打卡討論串留言就算打卡成功</p></li></ol></div></div><div class="row f-between-center" data-v-2e4f06a4><div class="col-sm-6 col-xxl-2" data-v-2e4f06a4><div class="dataTables_length" id="dataTable_length" data-v-2e4f06a4><label class="f-center gap-2" data-v-2e4f06a4> Show <select name="dataTable_length" aria-controls="dataTable" class="form-control form-control-sm" data-v-2e4f06a4><option value="10" data-v-2e4f06a4>10</option><option value="25" data-v-2e4f06a4>25</option><option value="50" data-v-2e4f06a4>50</option><option value="100" data-v-2e4f06a4>100</option></select> entries </label></div></div><div class="col-sm-6 col-xxl-3 mt-2 mt-sm-0" data-v-2e4f06a4><div id="dataTable_filter" class="dataTables_filter text-end" data-v-2e4f06a4><label class="f-center gap-2" data-v-2e4f06a4> Search: <input type="search" class="form-control form-control-sm" placeholder="搜尋使用者名稱" aria-controls="dataTable" data-v-2e4f06a4></label></div></div></div>',2)),g("div",xe,[j(n)?(B(),w("table",Re,[g("thead",Me,[g("tr",null,[l[0]||(l[0]=g("th",null,"使用者名稱",-1)),(B(!0),w(L,null,N((c=j(n))==null?void 0:c.dateList,(v,p)=>(B(),w("th",{key:p,title:j(ye)(v)}," Day "+F(p+1),9,Ie))),128))])]),g("tbody",null,[(B(!0),w(L,null,N((h=j(n))==null?void 0:h.processedUsers,({author_id:v,username:p,days:T})=>(B(),w("tr",{key:v},[g("td",null,F(p),1),(B(!0),w(L,null,N(T,(m,_)=>(B(),w("td",{key:_,class:"text-center"},[m?(B(),w("i",Le)):fe("",!0)]))),128))]))),128))])])):(B(),w("div",Ne,l[1]||(l[1]=[g("h2",{class:"fs-5 fs-lg-2"},"請重新整理頁面",-1)])))]),g("div",Fe,[g("div",Ve,[g("div",Ae," Showing 1 to 10 of "+F((u=j(n))==null?void 0:u.processedUsers.length)+" entries ",1)]),l[2]||(l[2]=J('<div class="col-sm-6 mt-2 mt-sm-0" data-v-2e4f06a4><div class="f-md-end-center" data-v-2e4f06a4><ul class="pagination" data-v-2e4f06a4><li class="paginate_button page-item previous disabled" id="dataTable_previous" data-v-2e4f06a4><a href="#" aria-controls="dataTable" data-dt-idx="0" tabindex="0" class="page-link" data-v-2e4f06a4><i class="fas fa-solid fa-angle-left" data-v-2e4f06a4></i></a></li><li class="paginate_button page-item active" data-v-2e4f06a4><a href="#" aria-controls="dataTable" data-dt-idx="1" tabindex="0" class="page-link" data-v-2e4f06a4>1</a></li><li class="paginate_button page-item" data-v-2e4f06a4><a href="#" aria-controls="dataTable" data-dt-idx="2" tabindex="0" class="page-link" data-v-2e4f06a4>2</a></li><li class="paginate_button page-item" data-v-2e4f06a4><a href="#" aria-controls="dataTable" data-dt-idx="3" tabindex="0" class="page-link" data-v-2e4f06a4>3</a></li><li class="paginate_button page-item next" id="dataTable_next" data-v-2e4f06a4><a href="#" aria-controls="dataTable" data-dt-idx="7" tabindex="0" class="page-link" data-v-2e4f06a4><i class="fas fa-solid fa-angle-right" data-v-2e4f06a4></i></a></li></ul></div></div>',1))])])])])}}},Ge=le(qe,[["__scopeId","data-v-2e4f06a4"]]);export{Ge as default};
