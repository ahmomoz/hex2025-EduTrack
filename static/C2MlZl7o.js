import{g as W,c as T,o as k,j as X,a as t,t as $,k as c,n as G,d as L,C as j,l as U,s as q,m as P,v as Z,r as Q,p as Y,q as tt,x as z,y as S,z as st,A as J,L as et,B as at,D as ot,E as nt,F as rt,P as it,G as lt,H as dt,I as D,J as ct,K as ft,M as ut,N,_ as gt}from"./4AO8hEj2.js";import{u as pt}from"./CXk303Ue.js";const ht={class:"row"},mt={class:"col-xl-3 col-md-6 mb-4"},_t={class:"card border-left-info shadow h-100 p-2"},vt={class:"card-body"},bt={class:"row no-gutters align-items-center h-100"},yt={class:"col mr-2"},xt={class:"row no-gutters align-items-center"},wt={class:"col-auto"},kt={class:"fs-3 mb-0 fw-bold"},Ct={class:"col"},$t={class:"progress progress-sm mr-2"},Dt={class:"col-xl-3 col-md-6 mb-4"},Lt={class:"card border-left-warning shadow h-100 p-2"},Pt={class:"card-body"},St={class:"row no-gutters align-items-center h-100"},jt={class:"col"},At={class:"fs-3 mb-0 fw-bold"},Bt={__name:"ContentRow",props:{stats:{type:Object,required:!0}},setup(e){const a=e,o=W(()=>{var s,n;return((((n=(s=a==null?void 0:a.stats)==null?void 0:s.css)==null?void 0:n.length)??0)/27).toFixed(2)*100});return(f,s)=>{var n;return k(),T("div",ht,[s[5]||(s[5]=X('<div class="col-xl-3 col-md-6 mb-4"><div class="card border-left-primary shadow h-100 p-2"><div class="card-body"><div class="row no-gutters align-items-center h-100"><div class="col"><div class="font-weight-bold text-primary mb-1"> 連續完成每日任務打卡人數 </div><div class="fs-3 mb-0 fw-bold"> 21 <span class="fs-6 fw-light">人</span></div></div><div class="col-auto"><i class="fas fa-check fa-2x text-gray-300"></i></div></div></div></div></div><div class="col-xl-3 col-md-6 mb-4"><div class="card border-left-success shadow h-100 p-2"><div class="card-body"><div class="row no-gutters align-items-center h-100"><div class="col"><div class="font-weight-bold text-success mb-1"> 今日完成每日任務打卡人數 </div><div class="fs-3 mb-0 fw-bold"> 3 <span class="fs-6 fw-light">人</span></div></div><div class="col-auto"><i class="fas fa-user-check fa-2x text-gray-300"></i></div></div></div></div></div>',2)),t("div",mt,[t("div",_t,[t("div",vt,[t("div",bt,[t("div",yt,[s[0]||(s[0]=t("div",{class:"text-xs font-weight-bold text-info text-uppercase mb-1"}," 任務發布進度 ",-1)),t("div",xt,[t("div",wt,[t("div",kt,$(c(o))+" % ",1)]),t("div",Ct,[t("div",$t,[t("div",{class:"progress-bar bg-info",role:"progressbar",style:G({width:`${c(o)}%`}),"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"},null,4)])])])]),s[1]||(s[1]=t("div",{class:"col-auto"},[t("i",{class:"fas fa-clipboard-list fa-2x text-gray-300"})],-1))])])])]),t("div",Dt,[t("div",Lt,[t("div",Pt,[t("div",St,[t("div",jt,[s[3]||(s[3]=t("div",{class:"font-weight-bold text-warning mb-1"}," 每日任務已經累積 ",-1)),t("div",At,[L($((n=a==null?void 0:a.stats)==null?void 0:n.css.length)+" ",1),s[2]||(s[2]=t("span",{class:"fs-6 fw-light"},"天",-1))])]),s[4]||(s[4]=t("div",{class:"col-auto"},[t("i",{class:"fas fa-calendar fa-2x text-gray-300"})],-1))])])])])])}}},V={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Ot={ariaLabel:{type:String},ariaDescribedby:{type:String}},Rt={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...V,...Ot},Ft=Z[0]==="2"?(e,a)=>Object.assign(e,{attrs:a}):(e,a)=>Object.assign(e,a);function w(e){return J(e)?S(e):e}function Mt(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return J(a)?new Proxy(e,{}):e}function Et(e,a){const o=e.options;o&&a&&Object.assign(o,a)}function H(e,a){e.labels=a}function K(e,a,o){const f=[];e.datasets=a.map(s=>{const n=e.datasets.find(u=>u[o]===s[o]);return!n||!s.data||f.includes(n)?{...s}:(f.push(n),Object.assign(n,s),n)})}function It(e,a){const o={labels:[],datasets:[]};return H(o,e.labels),K(o,e.datasets,a),o}const Nt=U({props:Rt,setup(e,a){let{expose:o,slots:f}=a;const s=Q(null),n=q(null);o({chart:n});const u=()=>{if(!s.value)return;const{type:d,data:_,options:v,plugins:p,datasetIdKey:h}=e,b=It(_,h),g=Mt(b,_);n.value=new j(s.value,{type:d,data:g,options:{...v},plugins:p})},r=()=>{const d=S(n.value);d&&(e.destroyDelay>0?setTimeout(()=>{d.destroy(),n.value=null},e.destroyDelay):(d.destroy(),n.value=null))},i=d=>{d.update(e.updateMode)};return Y(u),tt(r),z([()=>e.options,()=>e.data],(d,_)=>{let[v,p]=d,[h,b]=_;const g=S(n.value);if(!g)return;let l=!1;if(v){const m=w(v),x=w(h);m&&m!==x&&(Et(g,m),l=!0)}if(p){const m=w(p.labels),x=w(b.labels),y=w(p.datasets),C=w(b.datasets);m!==x&&(H(g.config.data,m),l=!0),y&&y!==C&&(K(g.config.data,y,e.datasetIdKey),l=!0)}l&&st(()=>{i(g)})},{deep:!0}),()=>P("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:s},[P("p",{},[f.default?f.default():""])])}});function Tt(e,a){return j.register(a),U({props:V,setup(o,f){let{expose:s}=f;const n=q(null),u=r=>{n.value=r==null?void 0:r.chart};return s({chart:n}),()=>P(Nt,Ft({ref:u},{type:e,...o}))}})}const Ut=Tt("line",et),qt={__name:"CheckinLineChart",props:{stats:{type:Object,required:!0}},setup(e){var u,r;j.register(at,ot,nt,rt,it,lt,dt);function a(i,d=0,_=".",v=","){i=(i+"").replace(/[^0-9+\-Ee.]/g,"");const p=isFinite(+i)?+i:0,h=isFinite(+d)?Math.abs(d):0,b=v,g=_;let l="";return l=(h?((x,y)=>""+Math.round(x*Math.pow(10,y))/Math.pow(10,y))(p,h):""+Math.round(p)).split("."),l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,b)),(l[1]||"").length<h&&(l[1]=l[1]||"",l[1]+=new Array(h-l[1].length+1).join("0")),l.join(g)}const o=e,s={labels:Array.from({length:o.stats.css.length},(i,d)=>`Day ${d+1}`),datasets:[{label:"切版任務",data:(u=o==null?void 0:o.stats)==null?void 0:u.css,fill:!1,backgroundColor:"rgba(78, 115, 223, 0.05)",borderColor:"rgba(78, 115, 223, 1)",pointBackgroundColor:"rgba(78, 115, 223, 1)",tension:0},{label:"JS 任務",data:(r=o==null?void 0:o.stats)==null?void 0:r.js,fill:!1,backgroundColor:"rgba(244, 189, 51, 0.05)",borderColor:"rgba(244, 189, 51, 1)",pointBackgroundColor:"rgba(244, 189, 51, 1)",tension:0}]},n={responsive:!0,maintainAspectRatio:!1,layout:{padding:{left:10,right:25,top:25,bottom:0}},plugins:{legend:{display:!0,position:"right",labels:{boxWidth:12,padding:10}},tooltip:{backgroundColor:"rgb(255,255,255)",bodyColor:"#858796",titleColor:"#6e707e",titleFont:{size:14},borderColor:"#dddfeb",borderWidth:1,padding:15,displayColors:!1,mode:"index",intersect:!1,callbacks:{label:function(i){return i.datasetIndex===0?"切版任務完成數: "+a(i.raw):i.datasetIndex===1?"JS 任務完成數: "+a(i.raw):a(i.raw)}}}},scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{maxTicksLimit:7}},y:{grid:{color:"rgb(234, 236, 244)",zeroLineColor:"rgb(234, 236, 244)",drawBorder:!1,borderDash:[2],zeroLineBorderDash:[2]},ticks:{maxTicksLimit:5,padding:10,callback:i=>a(i)}}}};return(i,d)=>(k(),D(c(Ut),{data:s,options:n}))}},zt=ct("/img/undraw_learning_2jue.svg");var Jt={API_BASE_URL:"https://4ccf-114-27-206-1.ngrok-free.app/api"};const Vt={id:"content-wrapper",class:"d-flex flex-column height-100vh pt-4"},Ht={id:"content"},Kt={class:"container-fluid"},Wt={class:"row"},Xt={class:"col-xl-8 col-lg-7 mb-4"},Gt={class:"card shadow h-100"},Zt={class:"card-body"},Qt={class:"chart-area"},Yt={class:"col-xl-4 col-lg-5 mb-4"},ts={class:"card shadow h-100"},ss={class:"card-body px-4"},es={class:"f-column gap-3 mt-3"},as={class:"f-column gap-2"},os=["href"],ns={class:"f-column gap-2"},rs=["href"],is={__name:"Dashboard",async setup(e){let a,o;const f=ft(),{data:s,refresh:n}=([a,o]=ut(()=>pt(()=>"/tasks",{key:f.fullPath,initialCache:!1,baseURL:Jt.API_BASE_URL,onResponseError({response:u}){const{message:r}=u==null?void 0:u.data;$swal.fire({position:"center",icon:"error",title:r||"發生未知錯誤，請稍後重試",showConfirmButton:!1,timer:1500})}},"$g_9_Z1PXXu")),a=await a,o(),a);return z(()=>f.fullPath,()=>{n()}),(u,r)=>{var _,v,p,h,b,g,l,m,x,y,C,A,B,O,R,F,M,E,I;const i=Bt,d=qt;return k(),T("div",Vt,[t("div",Ht,[t("div",Kt,[r[5]||(r[5]=t("div",{class:"d-sm-flex align-items-center justify-content-between mb-4"},[t("h1",{class:"h3 mb-0 text-gray-800"},"Dashboard")],-1)),(_=c(s))!=null&&_.stats?(k(),D(i,{key:0,stats:(v=c(s))==null?void 0:v.stats},null,8,["stats"])):N("",!0),t("div",Wt,[t("div",Xt,[t("div",Gt,[r[0]||(r[0]=t("div",{class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[t("h6",{class:"m-0 font-weight-bold text-primary"}," 每日任務完成數量 ")],-1)),t("div",Zt,[t("div",Qt,[(p=c(s))!=null&&p.stats?(k(),D(d,{key:0,stats:(h=c(s))==null?void 0:h.stats},null,8,["stats"])):N("",!0)])])])]),t("div",Yt,[t("div",ts,[r[4]||(r[4]=t("div",{class:"card-header py-3 d-flex flex-row align-items-center justify-content-between"},[t("h6",{class:"m-0 font-weight-bold text-primary"},"今日任務")],-1)),t("div",ss,[r[3]||(r[3]=t("div",{class:"f-center"},[t("img",{src:zt,alt:"learning-image",class:"img-fluid",style:{width:"16rem"}})],-1)),t("ul",es,[t("li",as,[r[1]||(r[1]=t("span",{class:"fs-5"},[t("i",{class:"fas fa-circle text-primary me-1"}),L(" 切版 ")],-1)),t("a",{href:(l=(b=c(s))==null?void 0:b.formatted_tasks)==null?void 0:l.htmlAndCss[((g=c(s))==null?void 0:g.formatted_tasks.htmlAndCss.length)-1].link,target:"_blank",class:"fs-5 text-decoration-none slide-right-hover"},$((C=(m=c(s))==null?void 0:m.formatted_tasks)==null?void 0:C.htmlAndCss[((y=(x=c(s))==null?void 0:x.formatted_tasks)==null?void 0:y.htmlAndCss.length)-1].title),9,os)]),t("li",ns,[r[2]||(r[2]=t("span",{class:"fs-5"},[t("i",{class:"fas fa-circle text-warning me-1"}),L(" JavaScript ")],-1)),t("a",{href:(R=(A=c(s))==null?void 0:A.formatted_tasks)==null?void 0:R.javaScript[((O=(B=c(s))==null?void 0:B.formatted_tasks)==null?void 0:O.javaScript.length)-1].link,target:"_blank",class:"fs-5 text-decoration-none slide-right-hover"},$((I=(F=c(s))==null?void 0:F.formatted_tasks)==null?void 0:I.javaScript[((E=(M=c(s))==null?void 0:M.formatted_tasks)==null?void 0:E.javaScript.length)-1].title),9,rs)])])])])])])])])])}}},ls={};function ds(e,a){const o=is;return k(),D(o)}const us=gt(ls,[["render",ds]]);export{us as default};
