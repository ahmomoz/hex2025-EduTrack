import{_ as N,K as L,r as E,p as w,c as o,a as s,j as k,t as _,k as r,R as v,S as f,a2 as R,o as n,O as W,a3 as V}from"./DK2Uh2K6.js";function G(b,h,l,d,x="2025-05-01"){const g=new Date(x),u=h.reduce((a,c)=>{const p=new Date(c.date);return p>a?p:a},g),t=Math.floor((u-g)/(1e3*60*60*24))+1,e=Array.from({length:t},(a,c)=>{const p=new Date(g);return p.setDate(g.getDate()+c),p.toISOString().slice(0,10)}),P=b.map(a=>{const c=e.map(p=>{var S;return!!((S=a.presence)!=null&&S[p])});return{author_id:a.author_id,global_name:a.global_name,username:a.username,days:c}});return{dateList:e,processedUsers:P,pagination:l,updatedAt:d}}const j=b=>new Date(b).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"});var K={ALLUSERSPROFILE:"C:\\ProgramData",API_BASE_URL:"https://hex2025.onrender.com/api",APPDATA:"C:\\Users\\x5426\\AppData\\Roaming",CHROME_CRASHPAD_PIPE_NAME:"\\\\.\\pipe\\crashpad_14852_SRSFFVRLMEDSWBOW",COLOR:"1",COLORTERM:"truecolor",CommonProgramFiles:"C:\\Program Files\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files",CommonProgramW6432:"C:\\Program Files\\Common Files",COMPUTERNAME:"DESKTOP-K1CR84R",ComSpec:"C:\\Windows\\system32\\cmd.exe",DriverData:"C:\\Windows\\System32\\Drivers\\DriverData",EDITOR:"C:\\Windows\\notepad.exe",FPS_BROWSER_APP_PROFILE_STRING:"Internet Explorer",FPS_BROWSER_USER_PROFILE_STRING:"Default",GIT_ASKPASS:"c:\\Users\\x5426\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass.sh",HOME:"C:\\Users\\x5426",HOMEDRIVE:"C:",HOMEPATH:"\\Users\\x5426",INIT_CWD:"C:\\Program Files\\Nuxt\\hex2025-EduTrack",KMP_BLOCKTIME:"0",LANG:"zh_TW.UTF-8",LOCALAPPDATA:"C:\\Users\\x5426\\AppData\\Local",LOGONSERVER:"\\\\DESKTOP-K1CR84R",NODE:"C:\\Program Files\\nodejs\\node.exe",NODE_ENV:"production",NODE_EXE:"C:\\Program Files\\nodejs\\\\node.exe",NPM_CLI_JS:"C:\\Program Files\\nodejs\\\\node_modules\\npm\\bin\\npm-cli.js",npm_command:"run-script",npm_config_cache:"C:\\Users\\x5426\\AppData\\Local\\npm-cache",npm_config_globalconfig:"C:\\Users\\x5426\\AppData\\Roaming\\npm\\etc\\npmrc",npm_config_global_prefix:"C:\\Users\\x5426\\AppData\\Roaming\\npm",npm_config_init_module:"C:\\Users\\x5426\\.npm-init.js",npm_config_local_prefix:"C:\\Program Files\\Nuxt\\hex2025-EduTrack",npm_config_metrics_registry:"https://registry.npmjs.org/",npm_config_node_gyp:"C:\\Users\\x5426\\AppData\\Roaming\\nvm\\v18.16.0\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js",npm_config_noproxy:"",npm_config_prefix:"C:\\Users\\x5426\\AppData\\Roaming\\npm",npm_config_userconfig:"C:\\Users\\x5426\\.npmrc",npm_config_user_agent:"npm/9.5.1 node/v18.16.0 win32 x64 workspaces/false",npm_execpath:"C:\\Users\\x5426\\AppData\\Roaming\\nvm\\v18.16.0\\node_modules\\npm\\bin\\npm-cli.js",npm_lifecycle_event:"generate",npm_lifecycle_script:"nuxt generate",npm_node_execpath:"C:\\Program Files\\nodejs\\node.exe",npm_package_json:"C:\\Program Files\\Nuxt\\hex2025-EduTrack\\package.json",npm_package_name:"nuxt-app",NPM_PREFIX_NPM_CLI_JS:"C:\\Users\\x5426\\AppData\\Roaming\\npm\\node_modules\\npm\\bin\\npm-cli.js",NUMBER_OF_PROCESSORS:"8",NVM_HOME:"C:\\Users\\x5426\\AppData\\Roaming\\nvm",NVM_SYMLINK:"C:\\Program Files\\nodejs",OMP_WAIT_POLICY:"PASSIVE",OneDrive:"C:\\Users\\x5426\\OneDrive",OneDriveConsumer:"C:\\Users\\x5426\\OneDrive",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",OS:"Windows_NT",Path:"C:\\Program Files\\Nuxt\\hex2025-EduTrack\\node_modules\\.bin;C:\\Program Files\\Nuxt\\node_modules\\.bin;C:\\Program Files\\node_modules\\.bin;C:\\node_modules\\.bin;C:\\Users\\x5426\\AppData\\Roaming\\nvm\\v18.16.0\\node_modules\\npm\\node_modules\\@npmcli\\run-script\\lib\\node-gyp-bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files\\dotnet\\;C:\\Program Files\\Git\\cmd;C:\\Users\\x5426\\AppData\\Roaming\\nvm;C:\\Program Files\\nodejs;C:\\Windows\\System32\\Wbem;C:\\Program Files\\Docker\\Docker\\resources\\bin;C:\\Program Files\\PuTTY\\;C:\\Users\\x5426\\AppData\\Local\\Programs\\Python\\Python313\\Scripts\\;C:\\Users\\x5426\\AppData\\Local\\Programs\\Python\\Python313\\;C:\\Users\\x5426\\AppData\\Local\\Programs\\Python\\Launcher\\;C:\\Users\\x5426\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\x5426\\.dotnet\\tools;C:\\Users\\x5426\\AppData\\Roaming\\npm;C:\\Users\\x5426\\AppData\\Roaming\\nvm;C:\\Program Files\\nodejs;C:\\Users\\x5426\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Program Files (x86)\\ngrok;",PATHEXT:".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.CPL",PROCESSOR_ARCHITECTURE:"AMD64",PROCESSOR_IDENTIFIER:"Intel64 Family 6 Model 94 Stepping 3, GenuineIntel",PROCESSOR_LEVEL:"6",PROCESSOR_REVISION:"5e03",ProgramData:"C:\\ProgramData",ProgramFiles:"C:\\Program Files","ProgramFiles(x86)":"C:\\Program Files (x86)",ProgramW6432:"C:\\Program Files",PROMPT:"$P$G",PSModulePath:"C:\\Users\\x5426\\OneDrive\\文件\\WindowsPowerShell\\Modules;C:\\Program Files\\WindowsPowerShell\\Modules;C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules",PUBLIC:"C:\\Users\\Public",SESSIONNAME:"Console",SystemDrive:"C:",SystemRoot:"C:\\Windows",TEMP:"C:\\Users\\x5426\\AppData\\Local\\Temp",TERM_PROGRAM:"vscode",TERM_PROGRAM_VERSION:"1.99.3",TMP:"C:\\Users\\x5426\\AppData\\Local\\Temp",USERDOMAIN:"DESKTOP-K1CR84R",USERDOMAIN_ROAMINGPROFILE:"DESKTOP-K1CR84R",USERNAME:"x5426",USERPROFILE:"C:\\Users\\x5426",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",VSCODE_GIT_ASKPASS_MAIN:"c:\\Users\\x5426\\AppData\\Local\\Programs\\Microsoft VS Code\\resources\\app\\extensions\\git\\dist\\askpass-main.js",VSCODE_GIT_ASKPASS_NODE:"C:\\Users\\x5426\\AppData\\Local\\Programs\\Microsoft VS Code\\Code.exe",VSCODE_GIT_IPC_HANDLE:"\\\\.\\pipe\\vscode-git-7af9e1cdba-sock",VSCODE_INJECTION:"1",windir:"C:\\Windows",ZES_ENABLE_SYSMAN:"1"};const B={class:"container-fluid py-4 height-100vh"},H={class:"card shadow mt-4"},$={class:"card-body container-fluid pt-3"},X={class:"row"},J={class:"col"},z={class:"p-0"},Y={class:"m-0"},Z={class:"table-responsive mt-3"},q={key:0,class:"table table-bordered table-hover",id:"dataTable",width:"100%",cellspacing:"0"},Q={class:"table-light"},ee=["title"],se={class:"text-center"},ae={key:0,class:"fas fa-solid fa-check text-success"},te={key:1,class:"py-4"},oe={class:"row f-between-center mt-2"},ne={class:"col-sm-6"},ie={class:"dataTables_info",id:"dataTable_info",role:"status","aria-live":"polite"},re={class:"col-sm-6 mt-2 mt-sm-0"},le={class:"f-md-end-center"},de={class:"pagination"},pe={class:"paginate_button page-item previous disabled",id:"dataTable_previous"},ce=["disabled"],me=["onClick"],_e={key:1,class:"page-link"},ge={class:"paginate_button page-item next",id:"dataTable_next"},Ce=["disabled"],ue={__name:"index",setup(b){const{$swal:h}=L();E();const l=E(1);E(10);const d=E(null),x=async(t=1)=>{try{const e=await $fetch(`${K.API_BASE_URL}/dashboard/`);d.value=G(e.users,e.stats,e.pagination,e.updated_at,"2025-05-01")}catch(e){h.fire({position:"center",icon:"error",title:(e==null?void 0:e.data)||"發生未知錯誤，請稍後重試",showConfirmButton:!1,timer:1500})}};w(()=>x());const g=t=>{const e=[];if(t<=5)for(let a=1;a<=t;a++)e.push(a);else if(l.value<=3){for(let a=1;a<=4;a++)e.push(a);e.push("..."),e.push(t)}else if(l.value>=t-2){e.push(1),e.push("...");for(let a=t-3;a<=t;a++)e.push(a)}else e.push(1),e.push("..."),e.push(l.value-1),e.push(l.value),e.push(l.value+1),e.push("..."),e.push(t);return e},u=t=>{l.value=t};return(t,e)=>{var P,a,c,p,S,A,O,T,y,M,I;return n(),o("div",B,[e[10]||(e[10]=s("h1",{class:"h3 mb-2 text-gray-800"},"Tables",-1)),s("div",H,[e[9]||(e[9]=s("div",{class:"card-header py-3"},[s("h2",{class:"fs-5 m-0 text-primary"},"每日任務打卡狀況")],-1)),s("div",$,[s("div",X,[s("div",J,[s("ol",z,[e[2]||(e[2]=s("li",null,[s("p",{class:"m-0"},"*只要在該日打卡討論串留言就算打卡成功")],-1)),s("li",null,[s("p",Y," *資料更新頻率：一個小時更新一次（最後更新時間： "+_((P=r(d))==null?void 0:P.updatedAt)+"） ",1)])])])]),e[8]||(e[8]=k('<div class="row f-between-center" data-v-a96b6b61><div class="col-sm-6 col-xxl-2" data-v-a96b6b61><div class="dataTables_length" id="dataTable_length" data-v-a96b6b61><label class="f-center gap-2" data-v-a96b6b61> Show <select name="dataTable_length" aria-controls="dataTable" class="form-control form-control-sm" data-v-a96b6b61><option value="10" data-v-a96b6b61>10</option><option value="25" data-v-a96b6b61>25</option><option value="50" data-v-a96b6b61>50</option><option value="100" data-v-a96b6b61>100</option></select> entries </label></div></div><div class="col-sm-6 col-xxl-3 mt-2 mt-sm-0" data-v-a96b6b61><div id="dataTable_filter" class="dataTables_filter text-end" data-v-a96b6b61><label class="f-center gap-2" data-v-a96b6b61> Search: <input type="search" class="form-control form-control-sm" placeholder="搜尋使用者名稱" aria-controls="dataTable" data-v-a96b6b61></label></div></div></div>',1)),s("div",Z,[r(d)?(n(),o("table",q,[s("thead",Q,[s("tr",null,[e[3]||(e[3]=s("th",null,"使用者名稱",-1)),e[4]||(e[4]=s("th",null,"累積打卡天數",-1)),(n(!0),o(v,null,f((a=r(d))==null?void 0:a.dateList,(i,m)=>(n(),o("th",{key:m,title:r(j)(i)}," Day "+_(m+1),9,ee))),128))])]),s("tbody",null,[(n(!0),o(v,null,f((c=r(d))==null?void 0:c.processedUsers.sort((i,m)=>m.days.filter(C=>C).length-i.days.filter(C=>C).length),({global_name:i,author_id:m,username:C,days:U})=>(n(),o("tr",{key:m},[s("td",null,_(i)+" ("+_(C)+")",1),s("td",se,_(U.filter(D=>D).length),1),(n(!0),o(v,null,f(U,(D,F)=>(n(),o("td",{key:F,class:"text-center"},[D?(n(),o("i",ae)):W("",!0)]))),128))]))),128))])])):(n(),o("div",te,e[5]||(e[5]=[s("h2",{class:"fs-5 fs-lg-2"},"載入中 ...",-1)])))]),s("div",oe,[s("div",ne,[s("div",ie," Showing 1 to "+_((S=(p=r(d))==null?void 0:p.pagination)==null?void 0:S.page_size)+" of "+_((O=(A=r(d))==null?void 0:A.pagination)==null?void 0:O.total_count)+" entries ",1)]),s("div",re,[s("div",le,[s("ul",de,[s("li",pe,[s("a",{href:"#","aria-controls":"dataTable",class:"page-link",disabled:r(l)===1,onClick:e[0]||(e[0]=R(i=>u(t.page-1),["prevent"]))},e[6]||(e[6]=[s("i",{class:"fas fa-solid fa-angle-left"},null,-1)]),8,ce)]),(n(!0),o(v,null,f(g((y=(T=r(d))==null?void 0:T.pagination)==null?void 0:y.total_pages),(i,m)=>(n(),o("li",{class:V(["paginate_button page-item",{active:i===r(l),disabled:i==="..."}]),key:m},[i!=="..."?(n(),o("a",{key:0,href:"#","aria-controls":"dataTable",class:"page-link",onClick:R(C=>u(i),["prevent"])},_(i),9,me)):(n(),o("span",_e,"..."))],2))),128)),s("li",ge,[s("a",{href:"#","aria-controls":"dataTable",class:"page-link",disabled:r(l)===((I=(M=r(d))==null?void 0:M.pagination)==null?void 0:I.total_pages),onClick:e[1]||(e[1]=R(i=>u(t.page+1),["prevent"]))},e[7]||(e[7]=[s("i",{class:"fas fa-solid fa-angle-right"},null,-1)]),8,Ce)])])])])])])])])}}},Se=N(ue,[["__scopeId","data-v-a96b6b61"]]);export{Se as default};
